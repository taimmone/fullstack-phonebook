(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{25:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(2),o=t.n(c),a=t(18),i=t.n(a),u=(t(25),t(6)),d=t(9),s=t(19),l=t(5),j=t(4),b=t.n(j),f="/api/persons",h={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},create:function(e){return b.a.post(f,e).then((function(e){return e.data}))},update:function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return b.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))}},m=function(e){var n=e.filter,t=e.handleInput;return Object(r.jsx)("input",{name:"filter",value:n,onChange:t})},O=function(e){var n=e.newPerson,t=e.addPerson,c=e.handleInput;return Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{name:"name",value:n.name,onChange:c,required:!0})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{name:"number",value:n.number,onChange:c,required:!0})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.person,t=n.name,c=n.number,o=e.handleClick;return Object(r.jsxs)("li",{children:[Object(r.jsxs)("span",{children:[t," ",c]}),Object(r.jsx)("button",{onClick:o,children:"delete"})]})},p=function(e){var n=e.persons,t=e.filter,c=e.deletePerson;return Object(r.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(r.jsx)(v,{person:e,handleClick:function(){return c(e.id)}},e.id)}))})},x=function(e){var n=e.message,t=e.error,c=void 0!==t&&t;return Object(r.jsx)("div",{className:"notification".concat(c?" error":""),children:n})},g=function(){var e=Object(c.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],a=Object(c.useState)({name:"",number:""}),i=Object(l.a)(a,2),j=i[0],b=i[1],f=Object(c.useState)(""),v=Object(l.a)(f,2),g=v[0],w=v[1],k=Object(c.useState)(null),C=Object(l.a)(k,2),P=C[0],I=C[1];Object(c.useEffect)((function(){h.getAll().then((function(e){return o(e)}))}),[]);var S=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];I({message:e,error:n}),setTimeout((function(){return I(null)}),5e3)};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Phonebook"}),P&&Object(r.jsx)(x,{message:null===P||void 0===P?void 0:P.message,error:null===P||void 0===P?void 0:P.error}),Object(r.jsx)("h2",{children:"Filter numbers"}),Object(r.jsx)(m,{filter:g,handleInput:function(e){return w(e.target.value)}}),Object(r.jsx)("h2",{children:"Add a new"}),Object(r.jsx)(O,{newPerson:j,handleInput:function(e){var n=e.target,t=n.name,r=n.value;return b(Object(d.a)(Object(d.a)({},j),{},Object(u.a)({},t,r)))},addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===j.name}));n&&n.number!==j.number?window.confirm("".concat(j.name," is already added to phonebook, replace the old number with a new one?"))&&h.update(n.id,j).then((function(e){if(!e)return S("Information of ".concat(j.name," has already been removed from server"),!0),void o(t.filter((function(e){return e.id!==n.id})));o(t.map((function(t){return t.id!==n.id?t:e}))),S("Updated ".concat(j.name))})).catch((function(e){return S(e.response.data.error,!0)})):h.create(j).then((function(e){o([].concat(Object(s.a)(t),[e])),S("Added ".concat(j.name))})).catch((function(e){return S(e.response.data.error,!0)})),b({name:"",number:""})}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(p,{persons:t,filter:g,deletePerson:function(e){var n;window.confirm("Delete ".concat(null===(n=t.find((function(n){return n.id===e})))||void 0===n?void 0:n.name,"?"))&&h.remove(e).then(o(t.filter((function(n){return n.id!==e}))))}})]})};i.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(g,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.4177a8a3.chunk.js.map